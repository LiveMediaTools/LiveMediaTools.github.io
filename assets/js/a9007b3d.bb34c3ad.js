"use strict";(self.webpackChunkyourcmds_docs=self.webpackChunkyourcmds_docs||[]).push([[27],{5680:(e,l,a)=>{a.d(l,{xA:()=>c,yg:()=>f});var t=a(6540);function r(e,l,a){return l in e?Object.defineProperty(e,l,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[l]=a,e}function p(e,l){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);l&&(t=t.filter((function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable}))),a.push.apply(a,t)}return a}function n(e){for(var l=1;l<arguments.length;l++){var a=null!=arguments[l]?arguments[l]:{};l%2?p(Object(a),!0).forEach((function(l){r(e,l,a[l])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(a,l))}))}return e}function i(e,l){if(null==e)return{};var a,t,r=function(e,l){if(null==e)return{};var a,t,r={},p=Object.keys(e);for(t=0;t<p.length;t++)a=p[t],l.indexOf(a)>=0||(r[a]=e[a]);return r}(e,l);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(t=0;t<p.length;t++)a=p[t],l.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var o=t.createContext({}),g=function(e){var l=t.useContext(o),a=l;return e&&(a="function"==typeof e?e(l):n(n({},l),e)),a},c=function(e){var l=g(e.components);return t.createElement(o.Provider,{value:l},e.children)},m="mdxType",u={inlineCode:"code",wrapper:function(e){var l=e.children;return t.createElement(t.Fragment,{},l)}},y=t.forwardRef((function(e,l){var a=e.components,r=e.mdxType,p=e.originalType,o=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),m=g(a),y=r,f=m["".concat(o,".").concat(y)]||m[y]||u[y]||p;return a?t.createElement(f,n(n({ref:l},c),{},{components:a})):t.createElement(f,n({ref:l},c))}));function f(e,l){var a=arguments,r=l&&l.mdxType;if("string"==typeof e||r){var p=a.length,n=new Array(p);n[0]=y;var i={};for(var o in l)hasOwnProperty.call(l,o)&&(i[o]=l[o]);i.originalType=e,i[m]="string"==typeof e?e:r,n[1]=i;for(var g=2;g<p;g++)n[g]=a[g];return t.createElement.apply(null,n)}return t.createElement.apply(null,a)}y.displayName="MDXCreateElement"},431:(e,l,a)=>{a.r(l),a.d(l,{assets:()=>d,contentTitle:()=>s,default:()=>P,frontMatter:()=>f,metadata:()=>v,toc:()=>N});var t=a(5680),r=Object.defineProperty,p=Object.defineProperties,n=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,c=(e,l,a)=>l in e?r(e,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[l]=a,m=(e,l)=>{for(var a in l||(l={}))o.call(l,a)&&c(e,a,l[a]);if(i)for(var a of i(l))g.call(l,a)&&c(e,a,l[a]);return e},u=(e,l)=>p(e,n(l)),y=(e,l)=>{var a={};for(var t in e)o.call(e,t)&&l.indexOf(t)<0&&(a[t]=e[t]);if(null!=e&&i)for(var t of i(e))l.indexOf(t)<0&&g.call(e,t)&&(a[t]=e[t]);return a};const f={},s="FFmpeg",v={unversionedId:"ffmpeg/ffmpeg/README",id:"ffmpeg/ffmpeg/README",title:"FFmpeg",description:"1\u3001\u8f6c\u63a8RTMP\u534f\u8bae\u6d41",source:"@site/i18n/zh-cn/docusaurus-plugin-content-docs/current/ffmpeg/ffmpeg/README.md",sourceDirName:"ffmpeg/ffmpeg",slug:"/ffmpeg/ffmpeg/",permalink:"/ffmpeg/ffmpeg/",draft:!1,editUrl:"https://github.com/LiveMediaTools/LiveMediaTools.github.io/edit/main/docs/ffmpeg/ffmpeg/README.md",tags:[],version:"current",lastUpdatedAt:1728746040,formattedLastUpdatedAt:"2024\u5e7410\u670812\u65e5",frontMatter:{},sidebar:"ffmpeg",previous:{title:"\u4ecb\u7ecd",permalink:"/ffmpeg/"},next:{title:"FFprobe",permalink:"/ffmpeg/ffprobe/"}},d={},N=[{value:"1\u3001\u8f6c\u63a8RTMP\u534f\u8bae\u6d41",id:"1\u8f6c\u63a8rtmp\u534f\u8bae\u6d41",level:2},{value:"1.1\u3001\u8f6c\u63a8flv\u6587\u4ef6",id:"11\u8f6c\u63a8flv\u6587\u4ef6",level:3},{value:"\u53c2\u6570\u89e3\u91ca",id:"\u53c2\u6570\u89e3\u91ca",level:4},{value:"1.2\u3001\u8f6c\u63a8RTMP\u76f4\u64ad\u6d41",id:"12\u8f6c\u63a8rtmp\u76f4\u64ad\u6d41",level:3},{value:"2\u3001\u5f55\u5236RTMP\u534f\u8bae\u6d41",id:"2\u5f55\u5236rtmp\u534f\u8bae\u6d41",level:2},{value:"3\u3001\u8f6c\u63a8RTSP\u534f\u8bae\u6d41",id:"3\u8f6c\u63a8rtsp\u534f\u8bae\u6d41",level:2},{value:"3.1\u3001\u57fa\u4e8eTCP\u4f20\u8f93",id:"31\u57fa\u4e8etcp\u4f20\u8f93",level:3},{value:"\u53c2\u6570\u89e3\u91ca",id:"\u53c2\u6570\u89e3\u91ca-1",level:4},{value:"3.2\u3001\u57fa\u4e8eUDP\u4f20\u8f93",id:"32\u57fa\u4e8eudp\u4f20\u8f93",level:3},{value:"4\u3001\u56fe\u7247\u76f8\u5173",id:"4\u56fe\u7247\u76f8\u5173",level:2},{value:"4.1\u3001PNG\u8f6cYUV",id:"41png\u8f6cyuv",level:3},{value:"\u53c2\u6570\u89e3\u91ca",id:"\u53c2\u6570\u89e3\u91ca-2",level:4},{value:"4.2\u3001\u6253\u5f00YUV",id:"42\u6253\u5f00yuv",level:3},{value:"4.3\u3001YUV\u8f6cPNG",id:"43yuv\u8f6cpng",level:3},{value:"5\u3001\u8f6c\u7801\u76f8\u5173",id:"5\u8f6c\u7801\u76f8\u5173",level:2},{value:"5.1\u3001RTMP\u76f4\u64ad\u6d41\u8f6c\u7801\u6210720P H264",id:"51rtmp\u76f4\u64ad\u6d41\u8f6c\u7801\u6210720p-h264",level:3},{value:"\u53c2\u6570\u89e3\u91ca",id:"\u53c2\u6570\u89e3\u91ca-3",level:4},{value:"5.2\u3001RTMP\u76f4\u64ad\u6d41\u8f6c\u7801\u6210720P H265",id:"52rtmp\u76f4\u64ad\u6d41\u8f6c\u7801\u6210720p-h265",level:3}],h={toc:N},b="wrapper";function P(e){var l=e,{components:r}=l,p=y(l,["components"]);return(0,t.yg)(b,u(m(m({},h),p),{components:r,mdxType:"MDXLayout"}),(0,t.yg)("h1",m({},{id:"ffmpeg"}),"FFmpeg"),(0,t.yg)("h2",m({},{id:"1\u8f6c\u63a8rtmp\u534f\u8bae\u6d41"}),"1\u3001\u8f6c\u63a8RTMP\u534f\u8bae\u6d41"),(0,t.yg)("p",null,"\u7eaf\u8f6c\u63a8\uff0c\u6ca1\u6709\u7f16\u89e3\u7801\u3002"),(0,t.yg)("h3",m({},{id:"11\u8f6c\u63a8flv\u6587\u4ef6"}),"1.1\u3001\u8f6c\u63a8flv\u6587\u4ef6"),(0,t.yg)("pre",null,(0,t.yg)("code",m({parentName:"pre"},{className:"language-shell"}),"ffmpeg -re -stream_loop -1 -i test.flv -c copy -f flv rtmp://localhost:1935/live/destination\n")),(0,t.yg)("h4",m({},{id:"\u53c2\u6570\u89e3\u91ca"}),"\u53c2\u6570\u89e3\u91ca"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"-re\n\u53c2\u6570\u7528\u4e8e\u6a21\u62df\u5b9e\u65f6\u8bfb\u53d6\u8f93\u5165\u6d41\uff0c\u8f93\u5165\u6570\u636e\u7684\u5904\u7406\u901f\u5ea6\u5c06\u4e0e\u5b9e\u9645\u64ad\u653e\u901f\u5ea6\u4fdd\u6301\u4e00\u81f4\u3002")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"-stream_loop \u662f\u7528\u6765\u6307\u5b9a\u8f93\u5165\u6d41\u7684\u5faa\u73af\u6b21\u6570\u7684\u9009\u9879\u3002\n-1 \u4f5c\u4e3a -stream_loop \u7684\u53c2\u6570\u503c\uff0c\u8868\u793a\u65e0\u9650\u5faa\u73af\uff0c\u5373\u8f93\u5165\u6d41\u5c06\u4e0d\u65ad\u91cd\u590d\u64ad\u653e\uff0c\u76f4\u5230\u624b\u52a8\u505c\u6b62\u6216\u7a0b\u5e8f\u7ed3\u675f\u3002")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"-c \u662f -codec \u7684\u7b80\u5199\uff0c\u7528\u4e8e\u6307\u5b9a\u7f16\u7801\u5668\u6216\u89e3\u7801\u5668\u3002copy \u8868\u793a\u76f4\u63a5\u590d\u5236\u6e90\u6d41\u7684\u97f3\u89c6\u9891\u6570\u636e\uff0c\u4e0d\u91cd\u65b0\u7f16\u89e3\u7801\u3002 \u4e5f\u53ef\u4ee5\u5199\u6210 -c:v copy  -c:a copy "))),(0,t.yg)("h3",m({},{id:"12\u8f6c\u63a8rtmp\u76f4\u64ad\u6d41"}),"1.2\u3001\u8f6c\u63a8RTMP\u76f4\u64ad\u6d41"),(0,t.yg)("pre",null,(0,t.yg)("code",m({parentName:"pre"},{className:"language-shell"}),"ffmpeg -i rtmp://localhost:1935/live/source -c copy -f flv rtmp://localhost:1935/live/destination\n")),(0,t.yg)("admonition",m({},{type:"note"}),(0,t.yg)("p",{parentName:"admonition"},"\u5982\u679c\u8f93\u5165\u6d41\u672c\u8eab\u5c31\u662f\u5b9e\u65f6\u6d41\uff0c\u53ef\u4ee5\u4e0d\u52a0-re\u53c2\u6570\uff0c\u5f53\u8f93\u5165\u6d41\u6709GOP\u7f13\u5b58\uff0c\u5b83\u5c06\u4f1a\u88ab\u5feb\u9012\u5904\u7406\u5e76\u8f6c\u63a8\u51fa\u53bb\uff0c\u914d\u7f6e\u5408\u9002\u7684\u64ad\u653e\u7b56\u7565\u6bd4\u52a0-re\u53c2\u6570\u80fd\u964d\u4f4e\u5ef6\u8fdf\u3002")),(0,t.yg)("h2",m({},{id:"2\u5f55\u5236rtmp\u534f\u8bae\u6d41"}),"2\u3001\u5f55\u5236RTMP\u534f\u8bae\u6d41"),(0,t.yg)("p",null,"\u53ef\u4ee5\u628a\u76f4\u64ad\u6d41\u5f55\u5236\u6210flv\u6587\u4ef6\uff1a"),(0,t.yg)("pre",null,(0,t.yg)("code",m({parentName:"pre"},{className:"language-shell"}),"ffmpeg -i  'rtmp://localhost:1935/live/test'  -c:v copy -c:a copy -f flv test.flv\n")),(0,t.yg)("h2",m({},{id:"3\u8f6c\u63a8rtsp\u534f\u8bae\u6d41"}),"3\u3001\u8f6c\u63a8RTSP\u534f\u8bae\u6d41"),(0,t.yg)("h3",m({},{id:"31\u57fa\u4e8etcp\u4f20\u8f93"}),"3.1\u3001\u57fa\u4e8eTCP\u4f20\u8f93"),(0,t.yg)("pre",null,(0,t.yg)("code",m({parentName:"pre"},{className:"language-shell"}),'ffmpeg -re -stream_loop -1  -i test.mp4 -c:v copy -c:a copy  -rtsp_transport tcp -f rtsp "rtsp://127.0.0.1:5544/live/test?token=123"\n')),(0,t.yg)("h4",m({},{id:"\u53c2\u6570\u89e3\u91ca-1"}),"\u53c2\u6570\u89e3\u91ca"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"-rtsp_transport tcp \u8868\u793a\u57fa\u4e8eTCP\u4f20\u8f93\u97f3\u89c6\u9891\u6570\u636e\uff0c\u4e5f\u5c31\u662fInterleaved\u6a21\u5f0f")),(0,t.yg)("h3",m({},{id:"32\u57fa\u4e8eudp\u4f20\u8f93"}),"3.2\u3001\u57fa\u4e8eUDP\u4f20\u8f93"),(0,t.yg)("pre",null,(0,t.yg)("code",m({parentName:"pre"},{className:"language-shell"}),' ffmpeg -re -stream_loop -1  -i test.mp4 -c:v copy  -c:a copy -f rtsp "rtsp://127.0.0.1:5544/live/test?token=123"\n')),(0,t.yg)("h2",m({},{id:"4\u56fe\u7247\u76f8\u5173"}),"4\u3001\u56fe\u7247\u76f8\u5173"),(0,t.yg)("h3",m({},{id:"41png\u8f6cyuv"}),"4.1\u3001PNG\u8f6cYUV"),(0,t.yg)("pre",null,(0,t.yg)("code",m({parentName:"pre"},{className:"language-shell"})," ffmpeg -i temp.jpg -s 1024x680 -pix_fmt yuvj420p 9.yuv\n")),(0,t.yg)("h4",m({},{id:"\u53c2\u6570\u89e3\u91ca-2"}),"\u53c2\u6570\u89e3\u91ca"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"-s 1024x680\uff1a \u8fd9\u4e2a\u9009\u9879\u6307\u5b9a\u8f93\u51fa\u89c6\u9891\u7684\u5c3a\u5bf8\u4e3a 1024x680 \u50cf\u7d20\u3002-s \u540e\u9762\u8ddf\u7740\u60f3\u8981\u7684\u5bbd\u5ea6\u548c\u9ad8\u5ea6\u3002")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"-pix_fmt yuvj420p\uff1a \u8fd9\u4e2a\u9009\u9879\u6307\u5b9a\u8f93\u51fa\u7684\u50cf\u7d20\u683c\u5f0f\u4e3a yuvj420p\u3002"))),(0,t.yg)("h3",m({},{id:"42\u6253\u5f00yuv"}),"4.2\u3001\u6253\u5f00YUV"),(0,t.yg)("pre",null,(0,t.yg)("code",m({parentName:"pre"},{className:"language-shell"}),"ffplay -f rawvideo -pixel_format yuv420p -video_size 1024x680 9.yuv\n")),(0,t.yg)("h3",m({},{id:"43yuv\u8f6cpng"}),"4.3\u3001YUV\u8f6cPNG"),(0,t.yg)("pre",null,(0,t.yg)("code",m({parentName:"pre"},{className:"language-shell"}),"ffmpeg -y -s 1024x680 -i 9.yuv output.jpg\n")),(0,t.yg)("h2",m({},{id:"5\u8f6c\u7801\u76f8\u5173"}),"5\u3001\u8f6c\u7801\u76f8\u5173"),(0,t.yg)("p",null,"ffmpeg\u8f6c\u7801\u4e3b\u8981\u6d89\u53ca\u5230\uff1a"),(0,t.yg)("p",null,"\u53d8\u6362\u7f16\u7801\u65b9\u5f0f\uff1a"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"H264\u8f6c\u5230H265\uff1a\u964d\u7801\u7387\uff0c\u6e05\u6670\u5ea6\u4e0d\u53d8\u7684\u60c5\u51b5\u4e0b\u964d\u4f4e\u7f51\u7edc\u4f7f\u7528\u5e26\u5bbd\u3002"),(0,t.yg)("li",{parentName:"ul"},"H265\u8f6c\u5230H264\uff1a\u89e3\u51b3\u4f4e\u7aef\u8bbe\u5907\u89e3\u4e0d\u4e86H265\u7684\u95ee\u9898\u3002")),(0,t.yg)("p",null,"\u53d8\u6362\u5206\u8fa8\u7387\uff1a"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"\u964d\u5206\u8fa8\u7387\uff1a\u964d\u7801\u7387\u3002"),(0,t.yg)("li",{parentName:"ul"},"\u5347\u5206\u8fa8\u7387\uff1a\u5b98\u65b9\u7684ffmpeg\u589e\u52a0\u5206\u8fa8\u7387\u548c\u7801\u7387\u6ca1\u6709\u5f88\u597d\u7684\u8d85\u5206\u6548\u679c\uff0c\u9700\u8981\u4f7f\u7528\u7b2c\u4e09\u65b9\u7684SDK\u96c6\u6210\u5230ffmpeg\u4e2d\uff0c\u6bd4\u5982\u82f1\u4f1f\u8fbe\u7684MAXINE\u3002")),(0,t.yg)("p",null,"\u964d\u7801\u7387\uff1a"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"\u6052\u5b9a\u7801\u7387\u53d8\u52a8\u6001\u7801\u7387\uff1a\u6839\u636e\u753b\u9762\u590d\u6742\u5ea6\u52a8\u6001\u8c03\u6574\u7801\u7387\uff0c\u8282\u7701\u7f51\u7edc\u5e26\u5bbd\uff0c\u63d0\u5347\u7528\u6237\u4f53\u9a8c\u3002")),(0,t.yg)("h3",m({},{id:"51rtmp\u76f4\u64ad\u6d41\u8f6c\u7801\u6210720p-h264"}),"5.1\u3001RTMP\u76f4\u64ad\u6d41\u8f6c\u7801\u6210720P H264"),(0,t.yg)("pre",null,(0,t.yg)("code",m({parentName:"pre"},{className:"language-shell"})," ffmpeg -rw_timeout 5000000 -i 'rtmp://localhost:1935/live/source' -acodec libfdk_aac -b:a 64k -ac 2 -ar 44100 -profile:a aac_he  -vcodec libx264 -b:v 2000k -level 3.1 -vprofile high -vsync 2 -strict -2 -preset medium -bf 3 -force_key_frames source  -f flv -loglevel level+info -vf \"scale='720:-2'\" 'rtmp://localhost:1935/live/dest'\n")),(0,t.yg)("h4",m({},{id:"\u53c2\u6570\u89e3\u91ca-3"}),"\u53c2\u6570\u89e3\u91ca"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"-rw_timeout 5000000 \u8bbe\u7f6e\u8bfb\u5199\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u4f4d\u662f\u5fae\u79d2\uff0c5000000\u4e3a5\u79d2\u3002\u5982\u679c\u5728\u8fd9\u4e2a\u65f6\u95f4\u5185\u6ca1\u6709\u5b8c\u6210\u8bfb\u5199\u64cd\u4f5c\uff0cFFmpeg \u5c06\u4f1a\u505c\u6b62\u64cd\u4f5c\u5e76\u62a5\u544a\u8d85\u65f6\u9519\u8bef\u3002")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"-acodec \u6267\u884c\u97f3\u9891\u7f16\u7801\u5668fdk_aac\uff0c\u8fd9\u4e2a\u7f16\u7801\u5e93\u662f\u5f00\u6e90\u7684\uff0c\u652f\u6301LC\u3001HE-AAC\u3001HE-AAC-V2\u4e09\u79cdprofile\u7ea7\u522b\u3002")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"-b:a \u6307\u5b9a\u97f3\u9891\u7801\u7387")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"-ac \u6307\u5b9a\u97f3\u9891\u901a\u9053\u65702")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"-ar \u6307\u5b9a\u97f3\u9891\u91c7\u6837\u738744100")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"-profile:a \u6307\u5b9a\u97f3\u9891profile\u7ea7\u522b\u4e3aaac_he")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"-vcodec \u6267\u884c\u89c6\u9891\u7f16\u7801\u5668\u4e3ax264")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"-b:v \u6307\u5b9a\u89c6\u9891\u7801\u7387\u4e3a1700Kbits/s")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"-level \u7528\u4e8e\u7ea6\u675f\u7801\u7387\u3001\u5e27\u7387\u548c\u5206\u8fa8\u7387"))),(0,t.yg)("p",null,(0,t.yg)("img",{alt:"H264 Level",src:a(1610).A,width:"829",height:"1209"})),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"-vprofile \u662f\u7528\u6765\u5b9a\u4e49\u4e00\u7ec4\u7f16\u7801\u5de5\u5177\u548c\u7279\u6027\u7684\u96c6\u5408\uff0c\u4ee5\u6ee1\u8db3\u4e0d\u540c\u4f7f\u7528\u573a\u666f\u548c\u6027\u80fd\u9700\u6c42\u3002")),(0,t.yg)("p",null,(0,t.yg)("img",{alt:"H264 Profile",src:a(9239).A,width:"689",height:"964"})),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"-vsync 2 \u5e27\u4f1a\u8fde\u540c\u5176\u65f6\u95f4\u6233\u4e00\u8d77\u901a\u8fc7\u6216\u4e22\u5f03\uff0c\u4ee5\u9632\u6b62 2 \u4e2a\u5e27\u5177\u6709\u76f8\u540c\u7684\u65f6\u95f4\u6233\u3002")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"-preset medium \u6307\u5b9a\u7f16\u7801\u901f\u901f\u548c\u538b\u7f29\u6bd4\uff0c\u7f16\u7801\u901f\u5ea6\u8d8a\u5feb\uff0c\u538b\u7f29\u6bd4\u8d8a\u4f4e\u3002",(0,t.yg)("a",m({parentName:"p"},{href:"https://trac.ffmpeg.org/wiki/Encode/H.264"}),"FFmpeg doc"))),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"-bf 3 \u6307\u5b9aB\u5e27\u6570\u76ee\u4e3a3\u4e2a\uff0c\u901a\u5e38\u662f\u4e24\u4e2aP\u5e27\u4e4b\u95f4\u7f16\u78013\u4e2aB\u5e27\u3002")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"-force_key_frames source \u5173\u952e\u5e27\u7f16\u7801\u8ddf\u968f\u6e90\u6d41\uff0c\u5982\u679c\u5f53\u524d\u5e27\u5728\u6e90\u6d41\u4e2d\u4e3a\u5173\u952e\u5e27\uff0c\u5219\u7f16\u7801\u8f93\u51fa\u5173\u952e\u5e27\uff0c\u5982\u679c\u6e90\u6d41\u4e2d\u7684\u5f53\u524d\u5e27\u5fc5\u987b\u88ab\u4e22\u5f03\uff0c\u5219\u4e0b\u4e00\u5e27\u8f93\u51fa\u5173\u952e\u5e27\u3002")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"-flv \u6307\u5b9a\u5c01\u88c5\u683c\u5f0f\u4e3aflv")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"-loglevel level+info \u6dfb\u52a0\u65e5\u5fd7\u7ea7\u522b\u524d\u7f00\u3001\u6307\u5b9a\u65e5\u5fd7\u7ea7\u522b\u4e3ainfo\u3002")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"-vf \"scale='720:-2'\" \u89c6\u9891\u8fc7\u6ee4\u5668\u53c2\u6570\uff0cscale \u662f\u7528\u4e8e\u7f29\u653e\u89c6\u9891\u7684\u8fc7\u6ee4\u5668\uff0c'720:-2' \u6307\u5b9a\u4e86\u8f93\u51fa\u89c6\u9891\u7684\u5bbd\u5ea6\u548c\u9ad8\u5ea6\uff1a720 \u8868\u793a\u8f93\u51fa\u89c6\u9891\u7684\u5bbd\u5ea6\u5c06\u88ab\u8bbe\u7f6e\u4e3a 720 \u50cf\u7d20\uff0c-2 \u8868\u793a\u9ad8\u5ea6\u5c06\u81ea\u52a8\u8ba1\u7b97\uff0c\u4ee5\u4fdd\u6301\u539f\u59cb\u89c6\u9891\u7684\u5bbd\u9ad8\u6bd4\u3002"))),(0,t.yg)("h3",m({},{id:"52rtmp\u76f4\u64ad\u6d41\u8f6c\u7801\u6210720p-h265"}),"5.2\u3001RTMP\u76f4\u64ad\u6d41\u8f6c\u7801\u6210720P H265"),(0,t.yg)("pre",null,(0,t.yg)("code",m({parentName:"pre"},{className:"language-shell"})," ffmpeg -rw_timeout 5000000 -i \"rtmp://localhost:1935/live/source\" -vcodec libx265 -b:v 2000k -acodec libfdk_aac -b:a 64k -ac 2 -ar 44100 -profile:a aac_he -preset veryfast -bf 3 -force_key_frames source -f flv -loglevel level+info -vf scale='720:-2' \u201crtmp://localhost:1935/live/dest\u201d\n")))}P.isMDXComponent=!0},1610:(e,l,a)=>{a.d(l,{A:()=>t});const t=a.p+"assets/images/h264_level-2a1f65e32c7779c25bd74c3bfa5328f4.png"},9239:(e,l,a)=>{a.d(l,{A:()=>t});const t=a.p+"assets/images/h264_profile-8551ca5fb704f301b1aeb353b41af027.png"}}]);